# chapter 2. 물리 계층



## 2.1 유선 LAN(IEEE802.3)

IEEE802.3은 이더넷에 관한 기술을 표준화하고 있다.

이더넷의 기원 : 1960년 ALOHAnet(알로하넷)

‘패킷이 전송되지 않으면 무작위 시간만큼 기다렸다가 다시 송신한다’ 는 구조가 초기 이더넷의 기초

이더넷은 저렴하게 고속화를 실현할 수 있고, 손쉽게 확장할 수 있어 TCP/IP와 마찬가지로 폭발적으로 세계에 보급

### 2.1.1 IEEE802.3 프로토콜

전송 속도나 사용하는 케이블에 따라 다양한 프로토콜 표준화

각 IEEE802.3 뒤에 알파벳 한두 문자를 붙인 정식 명칭 사용한다.

그러나 실무 현장에서는 ‘OOBASE-XX’와 같이, 프로토콜의 개요를 나타내는 별명 사용.

OO부분에는 전송속도, XX부분에는 사용하는 전송 매체나 레이저의 종류가 들어간다.

### 2.1.2 트위스트 페어 케이블

OOBASE-T나 OOBASE-TX와 같이 BASE뒤에 T가 붙어 있는 프로토콜은 트위스트 페어 케이블 사용.

겉으로 보기에는 하나의 케이블이지만, 실제로는 8가닥의 구리선을 2가닥씩(pair) 꼬아서(twisted) 하나로 묶은 케이블

1. 실드에 따른 분류

   실드 유무에 따라 UTP(Unshielded Twisted Pair) 케이블과 STP(Shielded Twisted Pair) 케이블로 분류가능.

   |      | UTP케이블                             | STP케이블                                                                          |
   | ---- | ------------------------------------- | ---------------------------------------------------------------------------------- |
   | 특징 | 소위 LAN케이블 의미                   | UTP의 단점 보완                                                                    |
   | 장점 | 다루기 쉽고, 가격 저렴, 다양한 디자인 | 알루미늄 포일이나 금속으로 감싸서 전자석 노이즈 차단, 전기 신호의 감쇠나 산란 방지 |
   | 단점 | 전자석 노이즈에 약함                  | 가격이 높음                                                                        |


![utp,stp](https://github.com/user-attachments/assets/884c1687-651c-4d98-b38f-419a47e47a7e)


2. 커넥터 핀 할당에 따른 분류

트위스트 페어 케이블은 구리선을 나열하는 순서에 따라 스트레이트 케이블과 크로스 케이블로 분류

- 스트레이트 케이블 : 다른 타입의 물리 포트끼리 연결할 때( 예를 들면, PC와 L2 스위치를 연결 등) 사용
 
- 크로스 케이블 : 같은 타입의 물리 포트끼리 연결할 때 (예를 들어, 스위치와 스위치를 연결하는 등) 사용
![다운로드](https://github.com/user-attachments/assets/d8f44f34-38c5-4dcf-876b-e06beaea0680)



3. 카테고리에 따른 분류

트위스트 페어 케이블에는 카테고리라는 개념 존재.

카테고리는 전송속도와 직접 관계가 있다. 카테고리 값이 클수록 전송속도가 빠른 프로토콜에 대응 가능.

### 2.1.3 광섬유 케이블

OOBASE-SX/SR 또는 OOBASE-LX/LR 프로토콜은 광섬유 케이블을 사용하는 프로토콜

OOBASE-SX/SR의 ‘S’는 Short wavelength의 S, OOBASE-LX/LR의 ‘L’은 Long wavelength의 L

각 레이저의 종류는 전송거리와 사용하는 광섬유 케이블의 종류와 관계가 있다.

광섬유 케이블은 유리를 가느다란 관으로 만든 것으로 광신호 전송.

광섬유 케이블은 빛의 굴절률이 높은 코어와, 굴절률이 비교적 낮은 클래딩의 2층으로 구성되어 있다.

굴절률이 다른 유리를 2층 구조로 만들어 빛을 코어 안에 가둠으로써, 손실률이 낮은 빛의 전송로를 만든다.

이 빛의 전송로를 모드라고 부름.

광섬유 케이블은 거리를 늘려도 신호가 잘 감쇠하지 않기 때문에 광대역을 유지할 수 있다.

트위스트 페어 케이블 보다 매우 긴 거리에 설치 할 수 있음. 그러나 케이블 구조가 치밀하기 때문에 다루기 어려운 것이 단점.

![광섬유](https://github.com/user-attachments/assets/d9f4c330-f7c4-4bd6-a061-bc1395a0467a)


광섬유 케이블의 종류는 케이블과 커넥터에 따라 구분할 수 있다.

1. 케이블에 따른 분류

광신호가 지나는 코어의 지름 차이에 따라 다중 모드 광섬유 케이블(MMF)와 단일 모드 광섬유 케이블(SMF) 2종류 존재.

- 다중 모드 광섬유 케이블 : 전송로가 여럿이므로 단일 모드 광섬유 케이블에 비해 가격이 저렴하고, 다루기 쉬워 LAN등 비교적 근거리를 연결할 때 사용
- 단일 모드 광섬유 케이블 : 장파장 빛을 사용하는 프로토콜에서 사용. 코어지름을 작게하는 것 뿐아니라, 코어와 클래딩의 굴절률 차를 적절하게 제어함으로써, 모드가 하나가 된다. 전송로가 하나만 존재하도록 설계되어 장거리 전송과 대용량의 데이터 전송이 가능하다. 가정이나 회사에서는 거의 찾아볼 수 없고, 데이터 센터나 ISP의 백본 설비에서 쉽게 찾아볼 수 있다.

| 비교항목           | 다중모드광섬유     | 단일모드광섬유 |
| ------------------ | ------------------ | -------------- |
| 코어지름           | 50(마이크로미터)   |
| 62.6(마이크로미터) | 8~10(마이크로미터) |
| 빛의 전송로(모드)  | 여럿               | 하나           |
| 모드 분산          | 있음               | 없음           |
| 전송 손실          | 적음               | 더 적음        |
| 전송 거리          | ~550m              | ~70km          |
| 상용 용이성        | 어려움             | 더 어려움      |
| 비용               | 비쌈               | 더 비쌈        |

- MPO 케이블 : 12가닥 또는 24가닥을 하나로 묶은 케이블. 40Gbps를 만들려면 광섬유 케이블 한 개만으로 부족하기 때문에 가닥 수를 늘려 전송량을 폭발적으로 증가.

2. 커넥터에 따른 분류

광섬유 케이블 커넥터에는 다양한 형태가 있으나, SC커넥터, LC커넥터, MPO 커넥터 3가지 종류가 자주 사용된다.

연결하는 기기나 트랜시버 모듈에 따라 어떤 커넥터를 사용할지 선택

실제 사용할 때는 먼저, 사용할 프로토콜에 맞춰 연결하는 기기나 트랜시버 모듈을 선택하고, 그 뒤 각각 맞춰 케이블 종류와 커넥터 연결.

![sc,lc,mpo](https://github.com/user-attachments/assets/41348a0b-ebf7-4658-8bb8-e11bc1cf334b)


### 2.1.4 두 가지 통신 방식

인터넷 통신 방식은 크게 반이중화 통신과 전이중화 통신 2가지로 나눌 수 있다.

네트워크 기기나 PC의 물리포트에 대해 어떤 통신 방식을 설정하는가에 따라 전송 속도가 크게 달라짐.

1. 반이중화 통신

반이중화 통신은 송신할 때와 수신할 때, 그 해당 통신 방향을 전환해서 사용하는 방식.

패킷을 송신할때는 패킷을 수신할 수 없고, 반대로 수신할 때는 송신할 수 없다.

우연히 양측이 같은 타이밍에 패킷을 송신하고, 송신 중에 패킷을 수신 했을 때는 충돌이라고 판단해 ‘잼 신호’라는 특수한 비트 패턴을 송신한다. 잼 신호를 받은 단말은 각각 무작위 시간동안 기다린 뒤 패킷을 다시 보내기를 시도.

이 구조를 CSMA/CD(Carrier Sense Multiple Access with Collision Detection)라 부릅니다.

![CamScanner 2025-01-23 19 32_1](https://github.com/user-attachments/assets/a74b32ba-e69a-45d2-b3fd-fd8833219b15)

2. 전이중화 통신

송신용 전송로와 수신용 전송로를 별도로 준비하고, 송신과 수신을 동시에 수행하는 방식

송신과 수신을 동시에 수행할 수 있기 때문에 CSMA/CD 구조가 필요하지 않고, 전송 속도를 최대한 높일 수 있음

현대 고속 이더넷은 전이중화 통신이 기본이며 설정오류등으로 인해 반이중화 통신이 되었을 땐 전이주와 통신이 되도록 설정해야함.

![CamScanner 2025-01-23 19 32_2](https://github.com/user-attachments/assets/1e15235a-c7c1-472d-94fb-c254a363c7c6)


> 오토 니고시에이션

물리 포트에서 사용하는 프로토콜이나 통신 방식(반이중화/전이중화 통신)을 자동으로 식별하는 기능.
오토 니고시에이션에 설정된 물리포트는 연결과 동시에 FLP(Fast Link Pulse)라는 특수한 신호 패턴을 사용해, 지원하는 프로토콜이나 통신방식을 교환.
그리고 미리 결정된 우선순위에 기반해, 어떤 프로토콜의 어떤 통신방식을 채용할 것인지 결정.

🍋 오토 니고시에이션을 사용할 때는 인접한 기기의 모든 물리 포트에도 오토 니고시에이션이 설정되어 있어야함. 한쪽에만 설정되어 있다면 자동으로 반 이중화 통신이 선택된다.

>

## 2.2 무선LAN(IEEE802.11)

IEEE802.11에는 무선 LAN 프로토콜이 표준화 됨.

와이파이는 무선 LAN 제품을 보급하기 위한 목적으로 설립된 미국 업계 단체인 와이파이 얼라이언스가 수행하는 상호 연결 설정을 의미.

IEEE802.11 대응 제품들 대부분이 와이파이 설정을 지원하기 때문에 'IEEE802.11 대응 제품=와이파이 설정제품’ 이라고 해도 큰 오류는 없으나 엄밀히 말하면 서로 다르다.

IEEE802.11 역시 IEEE802.3과 마찬가지로 각 프로토콜은 IEEE802.11 뒤에 알파벳을 추가해 이름을 붙이며 프로토콜에 따라 사용하는 주파수 대역, 변조 방식, 그리고 사용되는 기술이 다르다.

새로운 프로토콜일수록 더 빠르고 잘 연결되며 안정적으로 통신 가능!

### 2.2.1 주파수 대역

무선 LAN에서 사용하는 주파수 대역은 2.4GHz 대역 또는 5.0GHz 대역 중 하나.

이 대역을 채널이라는 형태로 나누어 사용.

1. 2.4GHz 대역

이 대역은 ISM 밴드라 불리며, 무선 LAN 뿐만 아니라 전자레인지, 블루투스, 아마추어 무선 등에도 사용된다.

무선 LAN에서는 이 주파수 대역을 20MHz씩 13개 채널로 나누어서 사용.

그러나 각 채널의 파장이 미묘하게 겹치기 때문에 동시에 사용할 수 있는 채널은 그중 3개이다.

1ch, 6ch, 11ch같이 주파수 대역이 겹치지 않는 3개의 채널을 선택해서 사용.

2.4GHz대역은 전파 특성상 장애물에 강하기 때문에 옥내외에서 사용할 수 있다.
그러나 전자레인지나 아마추어 무선 등 일상생활에서 전파 간섭을 일으키는 경우가 많기 때문에 충분히 고려해서 사용해야 한다.

전파간섭이 발생하면 갑자기 연결이 끊어지거나 패킷이 소실되어 버린다. 또한, 동시에 사용할 수 있는 채널이 적어 여기저기 이동해야한다.

![24](https://github.com/user-attachments/assets/411d3ea7-515d-433b-82f7-c4861dceba9b)

2. 5GHz 대역

W52, W53, W56의 3개 주파수 대역으로 구성된다.

W52, W53은 20MHz씩 4개 채널, W56은 20MHz씩 11개 채널로 나뉘어 있다.

각 채널은 완전히 다른 파장을 사용하기 때문에 19개 채널을 모두 동시에 사용할 수 있다.

사용할 수 있는 채널의 수도 많고 동시에 사용가능 해서 깨끗한 전파 환경을 구축 할 수 있다.

하지만, 5GHz 대역은 전파 특성상 장애물에 약하며 옥외 사용에 제한이 있다. 옥외에서는 W56만 사용할 수 있으며, W53, W56은 레이더파를 검출하면 채널을 변경하는 DFS(Dynamic Frequency Selection)기능을 의무적으로 구현해야 한다.

DFS기능이 발동되면 일정 시간 동안 통신 할 수 없으므로 주의해야 함!

![52](https://github.com/user-attachments/assets/8dc110b1-b20c-461b-96a6-73b19be92b04)






> 💡 네트워크 구축에서는 2.4GHz 대역과 5GHz대역 중 어느 것을 선택할까?

최근에는 많은 채널을 동시에 사용할 수 있는 5GHz 대역을 선호.
액세스 포인트와 무선 LAN 클라이언트가 5GHz 대역에 대응한다면 5GHz 대역을 구축하는 것이 바람직

>

> ⏳ 액세스 포인트 배치
> 하나의 엑세스 포인트가 클라이언트의 통신을 커버할 수 있는 범위를 ‘셀’이라 부른다.
> 셀의 형태와 크기는 안테나의 형태, 사용하는 주파수 대역, 전파 출력의 크기 등에 따라 달라짐.
> 또한, 셀 바깥쪽 일수록 다시 말해, 액세스 포인트에서 멀어질수록 전파가 약해지고, 전송속도가 느려짐

그래서 액세스 포인트를 설치할때, 셀과 채널을 조합해서 틈이 생기지 않도록 메꿈으로써, 넓은 영역에서의 통신을 가능하게 한다.

>

### 2.2.2 변조 방식

무선 LAN은 전파를 사용해 데이터를 보낸다.

‘0’과 ‘1’로 구성된 디지털 데이터를 아날로그파로 변환하는 것을 변조하고 부른다.

무선 LAN은 1차 변조, 2차변조의 2차례 변조를 진행함으로써 빠르고 안정적으로 데이터를 보낼 수 있도록 한다.

데이터를 전파로 보낼 수 있게 1차 변조하고, 전파가 노이즈에 강해지도록 2차 변조 진행.

1. 1차 변조

일정 주파수로 된 기준 파형인 ‘반송파’와 디지털 데이터를 조합해 전파에 싣기 위한 ‘변조파’를 만든다.

무선LAN에서는 반송파에서 전파 진폭을 바꾸거나, 전파 각도를 어긋나게 해서 많은 ‘0’과 ‘1’을 보낼 수 있게 함

프로토콜의 전송속도와 관계가 있다.

1차 변조 방식 : BPSK, QPSK, 16QAM, 64QAM, 256QAM

2. 2차 변조

1차 변조로 만든 파형을 노이즈에 지지 않도록 하기 위한 변조.

애써 1차 변조로 만들어진 파형도, 그대로 전송하면 공간을 날아다니는 다른 전파(노이즈)에 의해 부서진다.

그래서 전파를 잘 확산시켜, 노이즈에 강하게 만든다.

2차 변조방식 : DSSS(저속), OFDM(고속), MINO-OFDM(보다 고속)

> 무선 LAN 프로토콜은 2차 변조 방식과 주파수 대역의 조합에 따라 정리할 수 있음.

### 2.2.3 무선 LAN의 통신 방식

무선 LAN 단말은 송신과 수신에 같은 채널을 사용하므로 반이중화 통신으로 작동.

즉, 송신할 때는 수신할 수 없으며, 수신할 때는 송신할 수 없다.

그리고 모두 같은 채널을 공유하기 때문에 여러 단말이 동시에 패킷을 송신할 수 없다.

동시에 패킷을 송신하게 되면 패킷이 충돌하고, 전파의 파형이 깨지게 된다.

그래서 무선 LAN에는 충돌을 피하면서 통신하는 CSMA/CA라는 구조가 있다.

여기서 유선 LAN의 반이중화 통신에서 사용하는 CSMA/CD와의 차이점은 CSMA/CD는 충돌한 후 무언가를 시도하려는 것에 비해, CSMA/CA는 충돌하기 전 무언가를 시도하려 하는 것이다.

### 2.2.4 고속화 기술

IEEE802.11은 새로운 프로토콜이 등장할 때마다, 다양한 기술을 추가하면서 고속화를 달성하고 있다.

1. 숏 가드 인터벌

무선 LAN의 안테나로 들어오는 전파에는 전송 안테나로 직접 들어오는 직접파, 건물이나 벽을 반사하면서 시간차를 두고 도달하는 반사파(간접파)가 있다.
이 2종류의 전파가 어긋나거나 겹쳐서 파형이 어그러지는 현상을 다중 경로 간섭 이라 부른다.

다중경로간섭이 발생하면 원래 전파로 복원할 수 없어 통신이 두절되거나 에러가 자주 발생한다.

이 다중 경로 간섭을 줄이는 기능이 “가드 인터벌” 이다.

가드 인터벌 기능을 사용하면 앞 뒤 전파가 다소 겹치더라도 원래 전파를 추출할 수 있기 때문에 다중 경로간섭의 영향을 줄일 수 있다.

‘숏 가드 인터벌’ 은 이 복사 기간을 짧게 하는 기능.

![CamScanner 2025-01-23 20 14_1](https://github.com/user-attachments/assets/79bb3091-ce87-4e91-bcdc-46c274daeaf3)


2. 채널 본딩

인접한 채널을 동시에 사용함으로써 전송속도를 향상하는 기술

채널을 본딩하면 하나의 액세스 포인트가 여러 채널을 사용할 수 있다. 따라서 2.4GHz 대역에서 채널 본딩하면 채널을 배치할 수 없음. 여러 액세스 포인트를 배치하는 무선 LAN 환경에서 채널 본딩할 때는 반드시 5GHz 대역을 사용

![CamScanner 2025-01-23 20 14_2](https://github.com/user-attachments/assets/dffa1857-318d-42d7-bb6b-167ce417c145)


3. MIMO

무선 LAN에서 공간을 흐르는 비트의 전송로를 공간 스트림이라 부른다. 이 공간 스트림을 동시에 여럿 사용함으로써, 전송 속도를 높이는 기술이 MIMO(multi-input multi-out)이다.

![CamScanner 2025-01-23 20 14_3](https://github.com/user-attachments/assets/6a6112e7-19c9-4fc1-8ab9-9a1cd7c4e5e3)


4. 빔포밍

스마트폰이나 PC등 무선 LAN 단말에 핀 포인트로 전파를 보내는 기능을 빔 포밍이라 부른다.

빔 포밍은 전파에 위상 제어를 통해 지향성을 만들고, 무선 LAN 단말에 대해 핀 포인트로 전파를 보냅니다.

그 결과, 전송 속도 향상 뿐만 아니라 전파 간섭 범위가 좁아져 통신 품질도 향상된다.

![빔포밍](https://github.com/user-attachments/assets/7241ae35-9677-46a2-a5f6-925c75ef64b0)


> 전파를 특정 위치로 집중해 빔을 만들어 효율을 높이는 것.
> 신호를 집중 시킴으로써 송출 전력을 증폭하지 않으면서 수신기에 전달되는 신호를 잘 잡을 수 있음. 이렇게 되면 통신 주파수가 빔 모양으로 만들어 지게 되며 ‘빔을 형성하는’ 것이 이름이 됨.

<빔 포밍과 다중 MIMO>
https://m.kukinews.com/article/view/kuk202010200380#_enliple

>

### 2.2.5 기타 무선 프로토콜

1. 블루투스

IEEE802.15.1로 표준화된 저전력형 근거리 무선 통신 프로토콜

블루투스는 무선 LAN과 비교하여, 전송 속도나 통신 거리면에서 극히 부족.

하지만 소비전력이 적고 다양한 장치를 페어링해서 간단하게 연결할 수 있기 때문에 폭발적으로 보급.

2.4GHz 대역을 79개 채널로 나누고, 1초에 1600회 속도로 채널을 바꾸며 통신하는 FHSS 라는 변조 방식 채용.

AFH로 에러가 많이 발생하는 채널을 검출하여 해당 채널을 사용하지 않음으로써 가능한 한 전파 간섭없게 통신.

2. 지그비

IEEE802.15.4 에서 표준화된 저전력형 단거리 무선 프로토콜

무선 LAN에 비해, 전송속도나 전송 거리에서 압도적으로 열악.

하지만 데이터 송수신 소비전력이 적을 뿐 아니라, 슬립 시 대기 전력이 블루투스보다도 작기 때문에 스마트홈 가전이나 제조 공장의 센서 등 필요할 때만 통신하는 일이 많은 IoT에서 이용.

2.4GHz 대역을 16개 채널로 나누어 사용.

1차 변조에는 QPSK, 2차 변조에는 DSSS 채용.


![블루투스 지그비](https://github.com/user-attachments/assets/1b279b50-3457-41ee-af49-df0619613b81)
